{% extends "base.html" %}

{% block title %}Course Materials â€” Staff{% endblock %}

{% block sidebar %}
<h3 style="margin-top:0;margin-bottom:12px;font-size:1.05rem;">Staff Menu</h3>
<a href="{{ url_for('staff_home') }}">Overview</a>
<a href="{{ url_for('staff_my_courses') }}">My Courses</a>
<a href="{{ url_for('staff_attendance') }}">Attendance</a>
<a href="{{ url_for('staff_exam_schedule') }}">Exam Schedule</a>
{% endblock %}

{% block content %}
<h2 style="margin-top:0;">Upload Course Materials</h2>

<form method="post" enctype="multipart/form-data"
      style="margin-bottom:16px;padding:12px;border:1px solid #ccc;border-radius:4px;">
  <label>Select file (PDF, DOCX, PPT, TXT):</label>
  <input type="file" name="file" required>
  <button type="submit"
          style="margin-left:8px;padding:6px 12px;border-radius:4px;background:#198754;color:#fff;border:none;">
    Upload
  </button>
</form>

<h3>Existing Materials</h3>
{% if files %}
<table style="width:100%;border-collapse:collapse;font-size:0.95rem;">
  <thead>
    <tr style="background:#eee;">
      <th style="padding:8px;border:1px solid #ccc;">File name</th>
      <th style="padding:8px;border:1px solid #ccc;">Uploaded at</th>
      <th style="padding:8px;border:1px solid #ccc;">Download</th>
    </tr>
  </thead>
  <tbody>
    {% for f in files %}
    <tr>
      <td style="padding:8px;border:1px solid #ccc;">{{ f.original_name }}</td>
      <td style="padding:8px;border:1px solid #ccc;">{{ f.uploaded_at }}</td>
      <td style="padding:8px;border:1px solid #ccc;">
        <a href="{{ url_for('download_material', stored_name=f.stored_name) }}">Download</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No materials uploaded for this course yet.</p>
{% endif %}
{% endblock %}
